<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èªæ—çµäºº 3.0 - åˆ†ç´šç‰¹è¨“ç‰ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #2d4a22; --bg: #fdfaf5; --accent: #c66b3d; --card: #ffffff; --wrong: #c62828; --pro: #5a4a78; }
        body { font-family: "Noto Sans TC", sans-serif; background-color: var(--bg); margin: 0; padding: 20px; display: flex; justify-content: center; }
        #app { width: 100%; max-width: 450px; }
        .card { background: var(--card); padding: 30px; border-radius: 24px; box-shadow: 0 15px 35px rgba(0,0,0,0.05); border: 1px solid #eee; }
        .level-selector { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .lvl-btn { padding: 12px; border: 2px solid #ddd; border-radius: 12px; cursor: pointer; background: white; font-weight: bold; transition: 0.3s; }
        .lvl-btn.active.basic { border-color: var(--primary); background: var(--primary); color: white; }
        .lvl-btn.active.pro { border-color: var(--pro); background: var(--pro); color: white; }
        .badge { padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; margin-bottom: 10px; display: inline-block; color: white; }
        .badge.basic { background: var(--primary); }
        .badge.pro { background: var(--pro); }
        h1 { color: #333; font-size: 1.4rem; margin: 10px 0 20px 0; text-align: center; }
        .question { font-size: 1.15rem; color: #333; line-height: 1.6; margin-bottom: 25px; font-weight: 600; background: #f9f9f9; padding: 15px; border-radius: 10px; }
        .options { display: grid; gap: 12px; }
        button.opt-btn { padding: 16px; border: 1.5px solid #ddd; border-radius: 15px; background: white; font-size: 1.05rem; cursor: pointer; transition: 0.2s; text-align: left; }
        button.opt-btn:hover { background: #f0f4ef; }
        #feedback { margin-top: 20px; padding: 15px; border-radius: 12px; display: none; }
        .correct { background: #e8f5e9; color: #2e7d32; }
        .wrong { background: #ffebee; color: var(--wrong); }
        #next-btn { width: 100%; padding: 16px; margin-top: 20px; border-radius: 15px; border: none; background: #333; color: white; font-size: 1.1rem; font-weight: bold; cursor: pointer; display: none; }
    </style>
</head>
<body>
<div id="app">
    <div class="card">
        <h1>ğŸ¹ èªæ—çµäºº 3.0</h1>
        
        <div id="setup-ui">
            <p style="text-align:center; color:#666;">è«‹é¸æ“‡ç‰¹è¨“é›£åº¦ï¼š</p>
            <div class="level-selector">
                <button class="lvl-btn" onclick="startLevel('basic')">åŸºç¤å€<br><small>å½¢éŸ³ç¾©/å¸¸ç”¨æˆèª</small></button>
                <button class="lvl-btn" onclick="startLevel('pro')">é«˜æ‰‹å€<br><small>æ–‡æ„åˆ¤åˆ¤è®€/æ¨è«–</small></button>
            </div>
        </div>

        <div id="game-ui" style="display:none;">
            <div id="mode-badge" class="badge"></div>
            <div class="question" id="q-text"></div>
            <div class="options" id="opt-zone"></div>
            <div id="feedback"></div>
            <button id="next-btn">ä¸‹ä¸€é¡Œ â”</button>
        </div>
    </div>
</div>

<script>
    const allQuestions = [
        // --- åŸºç¤å€ (Level: basic) ---
        { id: "b1", level: "basic", q: "ã€Œæ‹šã€å‘½å·¥ä½œçš„è®€éŸ³ç‚ºä½•ï¼Ÿ", options: ["ã„†ã„¢Ë‹", "ã„†ã„§ã„£"], correct: "ã„†ã„¢Ë‹", note: "æœƒè€ƒå¸¸è€ƒå­—éŸ³ï¼Œè«‹æ³¨æ„æ¨™æº–éŸ³ã€‚" },
        { id: "b2", level: "basic", q: "ä¸‹åˆ—å­—å½¢ä½•è€…æ­£ç¢ºï¼Ÿ", options: ["å†æ¥å†å‹µ", "å†æ¥å†å²"], correct: "å†æ¥å†å²", note: "å²ï¼šç£¨ç·´ã€‚" },
        // ... æ­¤è™•å¯åŠ å…¥ä¹‹å‰çš„ 40 é¡Œ ...

        // --- é«˜æ‰‹å€ (Level: pro) ---
        { id: "p1", level: "pro", q: "ã€Œæœ‰æ™‚å€™ï¼Œé›¢é–‹æ˜¯ç‚ºäº†å°‹æ‰¾æ›´è¿‘çš„è·¯ã€‚ã€é€™å¥è©±æœ€æ¥è¿‘ä¸‹åˆ—ä½•è€…ï¼Ÿ", options: ["å±±é‡æ°´è¤‡ç–‘ç„¡è·¯", "é€€æ­¥åŸä¾†æ˜¯å‘å‰", "æŸ³æš—èŠ±æ˜åˆä¸€æ‘", "æ¬²é€Ÿå‰‡ä¸é”"], correct: "é€€æ­¥åŸä¾†æ˜¯å‘å‰", note: "è€ƒé©—å°æ–‡å­¸éš±å–»çš„è½‰åŒ–ç†è§£ã€‚" },
        { id: "p2", level: "pro", q: "å¤äººäº‘ï¼šã€Œè®€æ›¸ä¸æ”¾éç–‘å•ï¼Œæ‰èƒ½å¢é•·å­¸å•ã€‚ã€é€™å¥è©±å¼·èª¿çš„æ˜¯ï¼Ÿ", options: ["è®€æ›¸éœ€åšè¦½ç¾¤æ›¸", "è®€æ›¸éœ€æœ‰æ‰¹åˆ¤æ€è€ƒ", "è®€æ›¸éœ€å‹¤å¯«ç­†è¨˜", "è®€æ›¸éœ€æº«æ•…çŸ¥æ–°"], correct: "è®€æ›¸éœ€æœ‰æ‰¹åˆ¤æ€è€ƒ", note: "ã€Œä¸æ”¾éç–‘å•ã€å³æ˜¯è³ªç–‘èˆ‡æ€è€ƒçš„éç¨‹ã€‚" },
        { id: "p3", level: "pro", q: "ã€Œå…¶æ•ä¹ï¼å·±æ‰€ä¸æ¬²ï¼Œå‹¿æ–½æ–¼äººã€‚ã€å¥ä¸­ã€Œå…¶ã€å­—çš„ç”¨æ³•èˆ‡ä¸‹åˆ—ä½•è€…ç›¸åŒï¼Ÿ", options: ["ã€Œå…¶ã€å¦‚åœŸçŸ³ä½•", "ã€Œå…¶ã€å¯¦ä¸ç„¶", "ã€Œå…¶ã€äººå…¶äº‹", "ã€Œå…¶ã€å¥ˆæˆ‘ä½•"], correct: "ã€Œå…¶ã€å¥ˆæˆ‘ä½•", note: "å…©è€…çš†ç‚ºå‰¯è©ï¼Œè¡¨ç¤ºæ¨æ¸¬æˆ–åŠ å¼·èªæ°£ï¼ˆé›£é“ï¼‰ã€‚" }
    ];

    let quizSet = [];
    let currentIdx = 0;

    function startLevel(lvl) {
        quizSet = allQuestions.filter(q => q.level === lvl);
        currentIdx = 0;
        document.getElementById('setup-ui').style.display = "none";
        document.getElementById('game-ui').style.display = "block";
        const badge = document.getElementById('mode-badge');
        badge.innerText = lvl === 'basic' ? "å­¸å¾’ç­‰ç´šï¼šåŸºç¤ç‰¹è¨“" : "å¤§å¸«ç­‰ç´šï¼šé«˜æ‰‹æŒ‘æˆ°";
        badge.className = "badge " + lvl;
        showQuestion();
    }

    function showQuestion() {
        const q = quizSet[currentIdx];
        document.getElementById('q-text').innerText = q.q;
        const optZone = document.getElementById('opt-zone');
        optZone.innerHTML = "";
        q.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'opt-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(opt);
            optZone.appendChild(btn);
        });
        document.getElementById('feedback').style.display = "none";
        document.getElementById('next-btn').style.display = "none";
    }

    function checkAnswer(selected) {
        const q = quizSet[currentIdx];
        const feedback = document.getElementById('feedback');
        const isCorrect = (selected === q.correct);
        
        if (isCorrect) {
            feedback.className = "correct";
            feedback.innerHTML = `ğŸ¯ ç­”å°äº†ï¼<br><small>${q.note}</small>`;
            confetti({ particleCount: 80, spread: 60 });
        } else {
            feedback.className = "wrong";
            feedback.innerHTML = `âŒ ç­”éŒ¯äº†ï¼Œæ­£ç¢ºæ˜¯ã€Œ${q.correct}ã€<br><small>${q.note}</small>`;
        }
        feedback.style.display = "block";
        document.getElementById('next-btn').style.display = "block";
        document.querySelectorAll('.opt-btn').forEach(b => b.disabled = true);
    }

    document.getElementById('next-btn').onclick = () => {
        currentIdx++;
        if (currentIdx < quizSet.length) {
            showQuestion();
        } else {
            alert("æœ¬å€ç‰¹è¨“å®Œæˆï¼");
            location.reload();
        }
    };
</script>
</body>
</html>
