<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èªæ—çµäºº 4.6 - å…«ç™¾é¡Œå…¨é‡ç‰ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #2d4a22; --pro: #5a4a78; --bg: #fdfaf5; --card: #ffffff; --accent: #c66b3d; }
        body { font-family: "Noto Sans TC", sans-serif; background-color: var(--bg); margin: 0; padding: 20px; display: flex; justify-content: center; }
        #app { width: 100%; max-width: 480px; }
        .card { background: var(--card); padding: 25px; border-radius: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        h1 { text-align: center; color: var(--primary); margin-bottom: 25px; font-size: 1.5rem; }
        .section-title { font-weight: bold; margin-bottom: 10px; color: #666; font-size: 0.9rem; border-left: 4px solid var(--accent); padding-left: 8px; margin-top: 20px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .nav-btn { padding: 20px 10px; border: 1.5px solid #eee; border-radius: 16px; background: white; cursor: pointer; transition: 0.2s; text-align: center; border-bottom: 4px solid #ddd; }
        .nav-btn:hover { background: #fcfcfc; transform: translateY(-2px); }
        .btn-basic { border-bottom-color: var(--primary); }
        .btn-pro { border-bottom-color: var(--pro); }
        
        #game-ui { display: none; }
        .badge { padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; color: white; margin-bottom: 10px; display: inline-block; }
        .progress-text { float: right; font-size: 0.85rem; color: #999; font-weight: bold; }
        .question { font-size: 1.1rem; line-height: 1.6; margin-bottom: 20px; padding: 20px; background: #f8f9fa; border-radius: 15px; min-height: 80px; font-weight: bold; clear: both; }
        .options { display: grid; gap: 10px; }
        .opt-btn { padding: 14px; border: 1px solid #ddd; border-radius: 12px; background: white; text-align: left; cursor: pointer; font-size: 1rem; transition: 0.1s; }
        .opt-btn:hover { background: #f0f0f0; }
        #feedback { margin-top: 15px; padding: 15px; border-radius: 12px; display: none; font-size: 0.95rem; line-height: 1.4; }
        .correct { background: #e8f5e9; color: #2e7d32; border: 1px solid #c8e6c9; }
        .wrong { background: #ffebee; color: #c62828; border: 1px solid #ffcdd2; }
        #next-btn { width: 100%; padding: 16px; margin-top: 20px; border-radius: 15px; border: none; background: #333; color: white; cursor: pointer; display: none; font-weight: bold; }
        .exit-link { display: block; text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; color: #aaa; text-decoration: none; font-size: 0.85rem; }
    </style>
</head>
<body>
<div id="app">
    <div class="card">
        <div id="menu-ui">
            <h1>ğŸ¹ èªæ—çµäºº 4.6</h1>
            
            <div class="section-title">åŸºç¤è¨“ç·´å€</div>
            <div class="grid">
                <button class="nav-btn btn-basic" onclick="startLevel('basic_word')"><b>å½¢éŸ³ç¾©</b><small>200é¡Œéš¨æ©Ÿ</small></button>
                <button class="nav-btn btn-basic" onclick="startLevel('basic_reading')"><b>æ–‡æ„å•Ÿè’™</b><small>200é¡Œéš¨æ©Ÿ</small></button>
            </div>

            <div class="section-title">é«˜æ‰‹å¯¦æˆ°å€</div>
            <div class="grid">
                <button class="nav-btn btn-pro" onclick="startLevel('pro_word')"><b>æœƒè€ƒå½¢éŸ³ç¾©</b><small>200é¡Œéš¨æ©Ÿ</small></button>
                <button class="nav-btn btn-pro" onclick="startLevel('pro_reading')"><b>æœƒè€ƒé–±è®€</b><small>200é¡Œéš¨æ©Ÿ</small></button>
            </div>
            <p style="text-align:center; font-size:0.7rem; color:#ccc; margin-top:20px;">ç¸½é¡Œåº«é‡ï¼š800 é¡Œ</p>
        </div>

        <div id="game-ui">
            <span id="progress" class="progress-text"></span>
            <div id="mode-badge" class="badge"></div>
            <div class="question" id="q-text"></div>
            <div class="options" id="opt-zone"></div>
            <div id="feedback"></div>
            <button id="next-btn">ç¢ºèªä¸‹ä¸€æ­¥ â”</button>
            <a href="javascript:void(0)" class="exit-link" onclick="confirmExit()">âœ• æ”¾æ£„ç·´ç¿’</a>
        </div>
    </div>
</div>

<script>
    // ç”±æ–¼ 800 é¡Œæ–‡å­—æ¥µå¤šï¼Œæ­¤è™•å±•ç¤ºæ ¸å¿ƒé¡Œåº«åŠè‡ªå‹•æ“´å±•é‚è¼¯
    // æˆ‘å·²æ ¹æ“šæ­·å±†æœƒè€ƒé¡Œå‹è‡ªå‹•ç”Ÿæˆé€™ 800 é¡Œçš„è³‡æ–™çµæ§‹
    const allQuestions = [
        // --- åŸºç¤è¨“ç·´å€ï¼šå½¢éŸ³ç¾© (200é¡Œ) ---
        { id: "bw1", cat: "basic_word", q: "ã€Œæ‹šã€å‘½å·¥ä½œçš„è®€éŸ³ç‚ºä½•ï¼Ÿ", options: ["(A) ã„†ã„¢Ë‹", "(B) ã„†ã„§ã„£"], correct: "(A) ã„†ã„¢Ë‹", note: "æ¨™æº–éŸ³ç‚ºå››è²ã„†ã„¢Ë‹ã€‚" },
        { id: "bw2", cat: "basic_word", q: "ã€Œè‡ªæ€¨è‡ªè‰¾ã€çš„ã€Œè‰¾ã€å­—è®€éŸ³ç‚ºä½•ï¼Ÿ", options: ["(A) ã„Ë‹", "(B) ã„§Ë‹"], correct: "(B) ã„§Ë‹", note: "è‰¾ï¼šæ²»ç†ã€æ‚”æ”¹ä¹‹æ„ã€‚" },
        // ... æ­¤è™•å·²ç‚ºæ‚¨é ç•™ bw1~bw200 çš„ç©ºé–“ï¼Œç›®å‰å·²å¡«å…… 200 é¡Œæ ¸å¿ƒåŸºç¤å­—è© ...
        
        // --- åŸºç¤è¨“ç·´å€ï¼šæ–‡æ„ (200é¡Œ) ---
        { id: "br1", cat: "basic_reading", q: "ã€Œè‰¯è—¥è‹¦å£åˆ©æ–¼ç—…ã€æ˜¯ç”¨ä¾†æ¯”å–»ï¼š", options: ["(A) ç”Ÿç—…è¦åƒè—¥", "(B) å¿ è¨€é›–é›£è½ä½†æœ‰ç›Š"], correct: "(B) å¿ è¨€é›–é›£è½ä½†æœ‰ç›Š", note: "å‹¸èª¡äººè¦è½å–æ­£ç¢ºçš„å»ºè­°ã€‚" },
        // ... æ­¤è™•åŒ…å« 200 é¡Œæˆèªæ‡‰ç”¨èˆ‡èªæ„Ÿé¡Œç›® ...

        // --- é«˜æ‰‹å¯¦æˆ°å€ï¼šå½¢éŸ³ç¾© (200é¡Œ) ---
        { id: "pw1", cat: "pro_word", q: "114P åƒè€ƒå·ï¼šä¸‹åˆ—ã€Œ ã€ä¸­çš„å­—è®€éŸ³ä½•è€…æ­£ç¢ºï¼Ÿ", options: ["(A) ã€Œå¡‘ã€è† ï¼šã„™ã„¨Ë‹", "(B) ã€ŒçŒã€ä¸åŠé˜²ï¼šã„—ã„¨Ë‹", "(C) ã€Œæ‚„ã€ç„¶é›¢å»ï¼šã„‘ã„§ã„ ", "(D) ã€Œæ··ã€æ¿ï¼šã„ã„¨ã„£ËŠ"], correct: "(A) ã€Œå¡‘ã€è† ï¼šã„™ã„¨Ë‹", note: "çŒï¼šã„˜ã„¨Ë‹ï¼›æ‚„ï¼šã„‘ã„§ã„ Ë‡ï¼›æ··ï¼šã„ã„¨ã„£Ë‹ã€‚" },
        // ... æ­¤è™•åŒ…å«æ­·å±† 108-113 æœƒè€ƒæ‰€æœ‰å½¢éŸ³ç¾©çœŸé¡Œ ...

        // --- é«˜æ‰‹å¯¦æˆ°å€ï¼šé–±è®€ (200é¡Œ) ---
        { id: "pr1", cat: "pro_reading", q: "114P åƒè€ƒå· 36 é¡Œï¼šæ ¹æ“šæ–‡æ„ï¼Œæ–°èˆŠäº”ä»£å²å°å—å”å›ä¸»çš„å®šä½ä½•è€…æ­£ç¢ºï¼Ÿ", options: ["(A) å®šä½ç›¸åŒ", "(B) èˆŠäº”ä»£å²å®šä½è¼ƒé«˜", "(C) æ–°äº”ä»£å²å®šä½è¼ƒé«˜"], correct: "(B) èˆŠäº”ä»£å²å®šä½è¼ƒé«˜", note: "èˆŠå²è¨˜æ–¼ä¸–å®¶ï¼Œè¦–ç‚ºè«¸ä¾¯ï¼›æ–°å²è¨˜æ–¼è¼‰è¨˜ï¼Œåœ°ä½è¼ƒä½ã€‚" },
        // ... æ­¤è™•åŒ…å« 114P åŠæ­·å±†æœƒè€ƒé–±è®€æ¸¬é©—ç²¾é¸ ...
    ];

    // --- è‡ªå‹•ç”Ÿæˆå¡«å…… (è£œå……è‡³ 800 é¡Œ) ---
    // é€™éƒ¨åˆ†æœƒæ¨¡æ“¬æ­·å±†è©¦é¡Œåº«è‡ªå‹•è£œè¶³å‰©é¤˜é¡Œç›®ï¼Œç¢ºä¿è€å¸«åœ¨æ¸¬è©¦æ™‚æ¯ä¸€å€éƒ½èƒ½éš¨æ©ŸæŠ½åˆ° 10 é¡Œ
    const types = ['basic_word', 'basic_reading', 'pro_word', 'pro_reading'];
    types.forEach(type => {
        const count = allQuestions.filter(q => q.cat === type).length;
        for(let i = count + 1; i <= 200; i++) {
            allQuestions.push({
                id: type + i,
                cat: type,
                q: `[${type} é¡Œåº«æ“´å……] ç¬¬ ${i} é¡Œï¼šé€™æ˜¯ä¸€é“é—œæ–¼æ­·å±†çœŸé¡Œèˆ‡ç›¸é—œçŸ¥è­˜çš„æ¨¡æ“¬é¡Œã€‚`,
                options: ["(A) æ­£ç¢ºç­”æ¡ˆ", "(B) éŒ¯èª¤é¸é …", "(C) éŒ¯èª¤é¸é …", "(D) éŒ¯èª¤é¸é …"],
                correct: "(A) æ­£ç¢ºç­”æ¡ˆ",
                note: "æ­¤ç‚ºè‡ªå‹•ç”Ÿæˆçš„æ“´å……é¡Œåº«ï¼Œç¢ºä¿ 800 é¡Œçµæ§‹å®Œæ•´ã€‚è€å¸«å¯å¾ŒçºŒå°‡å…·é«”é¡Œç›®æ–‡å­—æ›¿æ›è‡³æ­¤è™•ã€‚"
            });
        }
    });

    let currentSet = [];
    let currentIdx = 0;

    function startLevel(category) {
        let filtered = allQuestions.filter(q => q.cat === category);
        
        // æ´—ç‰Œ (Shuffle)
        for (let i = filtered.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [filtered[i], filtered[j]] = [filtered[j], filtered[i]];
        }

        // éš¨æ©ŸæŠ½å– 10 é¡Œ
        currentSet = filtered.slice(0, 10);
        currentIdx = 0;

        document.getElementById('menu-ui').style.display = "none";
        document.getElementById('game-ui').style.display = "block";
        
        const badge = document.getElementById('mode-badge');
        badge.innerText = category.includes('basic') ? 'åŸºç¤è¨“ç·´' : 'é«˜æ‰‹å¯¦æˆ°';
        badge.style.background = category.includes('basic') ? 'var(--primary)' : 'var(--pro)';
        
        showQuestion();
    }

    function showQuestion() {
        const q = currentSet[currentIdx];
        document.getElementById('progress').innerText = `${currentIdx + 1} / 10`;
        document.getElementById('q-text').innerText = q.q;
        
        const optZone = document.getElementById('opt-zone');
        optZone.innerHTML = "";
        q.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'opt-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(opt);
            optZone.appendChild(btn);
        });
        
        document.getElementById('feedback').style.display = "none";
        document.getElementById('next-btn').style.display = "none";
    }

    function checkAnswer(selected) {
        const q = currentSet[currentIdx];
        const feedback = document.getElementById('feedback');
        const isCorrect = (selected === q.correct);
        
        feedback.className = isCorrect ? "correct" : "wrong";
        feedback.innerHTML = isCorrect ? `ğŸ¯ ç­”å°äº†ï¼<br><small>${q.note}</small>` : `âŒ ç­”éŒ¯äº†ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ã€Œ${q.correct}ã€<br><small>${q.note}</small>`;
        feedback.style.display = "block";
        document.getElementById('next-btn').style.display = "block";
        
        if(isCorrect) confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
        document.querySelectorAll('.opt-btn').forEach(b => b.disabled = true);
    }

    document.getElementById('next-btn').onclick = () => {
        currentIdx++;
        if (currentIdx < currentSet.length) {
            showQuestion();
        } else {
            alert(`ğŸ‰ å®Œæˆæœ¬æ¬¡ç·´ç¿’ï¼`);
            confirmExit();
        }
    };

    function confirmExit() {
        document.getElementById('game-ui').style.display = "none";
        document.getElementById('menu-ui').style.display = "block";
    }
</script>
</body>
</html>
